<app-header></app-header>
<div class="main-container">
  <h1 class="title-container">PROPIETARIOS</h1>
  <p *ngIf="!isLoading">Total Registros: {{ data.length }}</p>
  <div class="options-container" *ngIf="!isLoading">
    <input type="text" placeholder="Buscar..." [(ngModel)]="searchTerm" (input)="filterData()" class="search-container">
    <button class="report" type="button" (click)="showModal()">
      <span class="material-symbols-outlined" translate="no">
        description
      </span>
      <p class="report-text">Informes</p>
    </button>

    <button class="report" type="button" (click)="openExternalLink()">
      <span class="material-symbols-outlined" translate="no">
        print
      </span>
      <span class="report-text">Ver Directorio</span>
    </button>
  </div>
  <div class="table-container" *ngIf="!isLoading; else loadingTemplate">
    <table>
      <thead>
        <tr>
          <th class="col-campo1">CÓDIGO</th>
          <th class="col-campo2">NOMBRE PROPIETARIO</th>
          <th class="col-campo3">R.U.C.</th>
          <th class="col-campo4">TELÉFONO</th>
          <th class="col-campo5">REPRESENTANTE</th>
          <th class="col-campo6">CENTRAL</th>
          <th class="col-campo7">AUDITOR</th>
          <th class="col-campo8">CNT</th>
          <th class="col-campo9">DCTO %</th>
          <th class="col-campo10">ESTADO</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of filteredData" (dblclick)="goToOwnerResume(item.codigo)">
          <td class="col-campo1">{{ item.codigo }}</td>
          <td class="col-campo2">{{ item.nombre_propietario }}</td>
          <td class="col-campo3">{{ item.ruc }}</td>
          <td class="col-campo4">{{ item.telefono }} {{ item.celular }}</td>
          <td class="col-campo5">{{ item.representante }}</td>
          <td class="col-campo6">{{ item.central }}</td>
          <td class="col-campo7">{{ item.auditor }}</td>
          <td class="col-campo8">{{ item.cnt }}</td>
          <td class="col-campo9">{{ item.dcto }}</td>
          <td class="col-campo10">{{ item.estado }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<ng-template #loadingTemplate>
  <div class="loading-container">
    <p>Cargando datos, por favor espere...</p>
  </div>
</ng-template>

<app-owners-reports [isVisible]="isModalVisible" (close)="hideModal()"></app-owners-reports>

<app-footer></app-footer>